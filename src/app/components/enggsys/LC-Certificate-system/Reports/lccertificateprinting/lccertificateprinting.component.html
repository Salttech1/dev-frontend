<section class="depositrenewal_section">
    <div class="container">
      <div class="form_depositor_container pb-2">
        <ng-container *ngIf="!pdfView">
          <div class="d-flex justify-content-center">
            <form [formGroup]="matPayForm">
              <div class="col-sm-12" formGroupName="reportParameters">
                <div class="col-md-12 col-sm-12 col-xl-12 col-xxl-8 pt-3">
                  <div class="checkbox_custom">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      name="provisionEntry"
                      id="provisionEntry"
                      formControlName="unprintAuth"
                      (change)="enableFields($event)"
                      appCommonAutoFocus
                    />
                    <label
                      for="provisionEntry"
                      class="form-check-label ps-2 ms-1 font500"
                    >
                      Print Unprinted Authorisations
                    </label>
                  </div>
                </div>
                <div class="col-md-12 col-sm-12 col-xl-12 col-xxl-12 pt-3">
                  <div class="">
                    <div class="">
                      <div
                        class="input-group"
                        [class.is-invalid]="
                          matPayForm.get('reportParameters')?.controls[
                            'authFromDate'
                          ].invalid &&
                          matPayForm.get('reportParameters')?.controls[
                            'authFromDate'
                          ].touched
                        "
                      >
                        <span
                          class="input-group-text leftform_lbl font500 text-dark1 font12"
                          >Authorisation From Date</span
                        >
                        <input
                          class="form-control border-start-0 post_input_field font500 text-dark1 font12"
                          [autocomplete]="'off'"
                          id="fromDateField"
                          formControlName="authFromDate"
                          matInput
                          [matDatepicker]="pickerFrom"
                          name=""
                          ng-change="changeEvent($event)"
                          (dateChange)="
                            validateInvalidFormat(
                              $event,
                              'fromDateField',
                              'Invalid From Date'
                            )
                          "
                        />
                        <div
                          class="datepicker_input_cutsom_icon input-group-append bg-white border-1 post_input_field datepicker_field border-start-0"
                        >
                          <span class="input-group-addon">
                            <mat-datepicker-toggle
                              matSuffix
                              [for]="pickerFrom"
                              tabindex="-1"
                            ></mat-datepicker-toggle>
                            <mat-datepicker #pickerFrom></mat-datepicker>
                          </span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-md-12 col-sm-12 col-xl-12 col-xxl-12 pt-3">
                  <div class="">
                    <div class="">
                      <div
                        class="input-group"
                        [class.is-invalid]="
                          matPayForm.get('reportParameters')?.controls[
                            'authToDate'
                          ].invalid &&
                          matPayForm.get('reportParameters')?.controls[
                            'authToDate'
                          ].touched
                        "
                      >
                        <span
                          class="input-group-text leftform_lbl font500 text-dark1 font12"
                          >Authorisation To Date</span
                        >
                        <input
                          type="text"
                          [autocomplete]="'off'"
                          class="form-control border-start-0 post_input_field font500 text-dark1 font12"
                          id="toDateField"
                          matInput
                          [min]="minDate"
                          [matDatepicker]="pickerTo"
                          formControlName="authToDate"
                          name=""
                          (dateChange)="
                            validateInvalidFormat(
                              $event,
                              'toDateField',
                              'Invalid To Date'
                            )
                          "
                        />
                        <div
                          class="datepicker_input_cutsom_icon input-group-append bg-white border-1 post_input_field datepicker_field border-start-0"
                        >
                          <span class="input-group-addon">
                            <mat-datepicker-toggle
                              matSuffix
                              [for]="pickerTo"
                              tabindex="-1"
                            ></mat-datepicker-toggle>
                            <mat-datepicker #pickerTo></mat-datepicker>
                          </span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-md-12 col-sm-12 col-xl-12 col-xxl-12 pt-3">
                  <div class="">
                    <div class="">
                      <div
                        class="input-group"
                        [class.is-invalid]="
                          matPayForm.get('reportParameters')?.controls['authFrom']
                            .invalid &&
                          matPayForm.get('reportParameters')?.controls['authFrom']
                            .touched
                        "
                      >
                        <span
                          class="input-group-text leftform_lbl font500 text-dark1 font12"
                          ><span class="text-danger font500 font12">*</span
                          >Authorisations From</span
                        >
                        <input
                        upperCase
                          type="text"
                          id="authFId"
                          class="form-control border-start-0"
                          formControlName="authFrom"
                          [f1]="{ id: 'AUTHNUM', subId: authNCon, fill: 1 }"
                        />
                      </div>
                      <div
                        *ngIf="
                          matPayForm.get('reportParameters')?.controls['authFrom']
                            .invalid &&
                          matPayForm.get('reportParameters')?.controls['authFrom']
                            .touched
                        "
                      >
                        <div
                          class="errorField common_color_txt font12 font500"
                          *ngIf="matPayForm.get('reportParameters')?.controls['authFrom'].errors && matPayForm.get('reportParameters')?.controls['authFrom'].errors?.['required']"
                        >
                          * Authorisations From is required
                        </div>
                      </div>
                      <div
                        class="invalid-feedback d-block"
                        *ngIf="
                          matPayForm.get('reportParameters')?.controls['authFrom']
                            .invalid &&
                          matPayForm.get('reportParameters')?.controls['authFrom']
                            .touched
                        "
                      >
                        <div
                          *ngIf="matPayForm.get('reportParameters')?.controls['authFrom'].errors?.['notFound']"
                        >
                          * Invalid Authorisation Number
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-md-12 col-sm-12 col-xl-12 col-xxl-12 pt-3">
                  <div class="">
                    <div class="">
                      <div
                        class="input-group"
                        [class.is-invalid]="
                          matPayForm.get('reportParameters')?.controls['authTo']
                            .invalid &&
                          matPayForm.get('reportParameters')?.controls['authTo']
                            .touched
                        "
                      >
                        <span
                          class="input-group-text leftform_lbl font500 text-dark1 font12"
                          >Authorisations To</span
                        >
                        <input
                        upperCase
                          type="text"
                          id="matGroup123"
                          class="form-control border-start-0"
                          formControlName="authTo"
                          [f1]="{ id: 'AUTHNUM', subId: authNCon, fill: 1 }"
                        />
                      </div>
                      <div class="invalid-feedback">
                        <div
                          *ngIf="matPayForm.get('reportParameters')
                        ?.controls['authTo'].errors?.['maxNumber']"
                        >
                          starting authorisation number cannot be greater than
                          ending certificate number
                        </div>
                        <div
                          *ngIf="matPayForm.get('reportParameters')
                        ?.controls['authTo'].errors?.['notFound']"
                        >
                          not Found
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </form>
          </div>
        </ng-container>
        <ng-container *ngIf="pdfView">
          <div class="page">
            <div class="paginatio_pdf_container d-flex w-100">
              <nav>
                <button
                  (click)="prevPage()"
                  [disabled]="page === 1"
                  class="previous bg_common_red br-10 px-3 me-1"
                >
                  Prev
                </button>
                <button
                  (click)="nextPage()"
                  [disabled]="page === totalPages"
                  class="next bg_common_red br-10 px-3 me-1"
                >
                  Next
                </button>
                <p class="mb-0 font500 ms-1">{{ page }} / {{ totalPages }}</p>
              </nav>
            </div>
            <pdf-viewer
              [src]="src"
              [original-size]="true"
              [render-text]="true"
              [rotation]="0"
              [show-all]="false"
              [fit-to-page]="true"
              [zoom]="1"
              [zoom-scale]="'page-width'"
              [external-link-target]="'blank'"
              [autoresize]="true"
              [show-borders]="false"
              class="pdf-viewer"
              [page]="page"
              (after-load-complete)="afterLoadComplete($event)"
              class="pdf-viewer"
            ></pdf-viewer>
          </div>
        </ng-container>
      </div>
    </div>
  </section>
  
  <app-loader *ngIf="loaderToggle"></app-loader>
  <section class="action_section position-fixed w-100">
    <div class="container">
      <div
        class="action_conatiner text-center bg-white br-10 w-100 d-flex justify-content-center"
      >
        <button
          type="submit"
          class="common_action_btn br-10 border-0 bg_common_red text-white"
          [attr.accesskey]="loaderToggle ? '' : 'v'"
          (click)="view()"
          *ngIf="btnArr[0]"
        >
          View
        </button>
        <button
          type="submit"
          class="common_action_btn br-10 border-0 bg_common_red text-white first_letter_textdecorationone"
          [attr.accesskey]="loaderToggle ? '' : 'w'"
          (click)="getReport(false)"
          *ngIf="btnArr[1]"
        >
          Do<span class="text-decoration-underline">w</span>nload
        </button>
        <button
          type="submit"
          class="common_action_btn br-10 border-0 bg_common_red text-white"
          [attr.accesskey]="loaderToggle ? '' : 'p'"
          (click)="getReport(true)"
          *ngIf="btnArr[3]"
        >
          Print
        </button>
        <button
          type="submit"
          class="common_action_btn br-10 border-0 bg_common_red text-white first_letter_textdecorationone"
          (click)="printCompleted()"
          *ngIf="btnArr[2]"
          [attr.accesskey]="loaderToggle ? '' : 'c'"
        >
          Pnt. <u>C</u>ompleted
        </button>
        <button
          type="submit"
          class="common_action_btn br-10 border-0 bg_common_red text-white"
          [attr.accesskey]="loaderToggle ? '' : 'b'"
          (click)="back()"
          *ngIf="btnArr[4]"
        >
          Back
        </button>
        <button
          type="submit"
          class="common_action_btn br-10 border-0 bg_common_red text-white first_letter_textdecorationone"
          [attr.accesskey]="loaderToggle ? '' : 'x'"
          (click)="handleExitClick()"
          *ngIf="btnArr[5]"
        >
          E<span class="text-decoration-underline">x</span>it
        </button>
      </div>
    </div>
  </section>
  